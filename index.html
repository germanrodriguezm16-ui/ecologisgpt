<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ecologist-GPT Â· Panel</title>
  <link rel="stylesheet" href="./assets/styles.css" />
  <script src="./config.js"></script>
  <script src="https://browser.sentry-cdn.com/8.20.0/bundle.tracing.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
</head>
<body>
  <div class="debug" id="debug">listo</div>

  <div class="layout">
    <aside>
      <div class="brand">
        <div class="logo">EG</div>
        <div>
          <h1>Ecologist-GPT</h1>
          <div class="muted">Panel principal</div>
        </div>
      </div>
      <nav id="nav">
        <button class="nav-btn" data-view="pedidos">ğŸ§¾ Pedidos</button>
        <button class="nav-btn" data-view="seguimiento">ğŸ“ Seguimiento</button>
        <button class="nav-btn" data-view="clientes">ğŸ‘¥ Clientes</button>
        <button class="nav-btn" data-view="inventario">ğŸ“¦ Inventario</button>
        <button class="nav-btn" data-view="devoluciones">â†©ï¸ Devoluciones</button>
        <button class="nav-btn" data-view="transacciones">ğŸ’³ Transacciones</button>
        <button class="nav-btn" data-view="socios">ğŸ¤ Socios</button>
      </nav>
      <div class="muted" style="margin-top:10px">v2.2 Â· paquete 2.0</div>
    </aside>

    <main>
      <div class="topbar">
        <div class="title" id="title">â€”</div>
        <div id="topActions" class="actions-inline"></div>
      </div>
      <div id="view"></div>
    </main>
  </div>

  <!-- Modal CategorÃ­a -->
  <div class="backdrop" id="modalCat" style="display:none">
    <div class="modal">
      <h3 id="modalTitle">Nueva categorÃ­a</h3>
      <form id="formCat">
        <div class="grid2">
          <div>
            <label>Nombre</label>
            <input name="nombre" type="text" placeholder="Ej: Proveedores" required />
          </div>
          <div>
            <label>Color</label>
            <input name="color" type="color" value="#3ba55d" />
          </div>
        </div>
        <div style="margin-top:12px">
          <label>Balance (placeholder)</label>
          <input name="balance" type="number" step="0.01" value="0" />
          <div class="muted" style="margin-top:6px">Luego serÃ¡ calculado automÃ¡ticamente.</div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelCat">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Config CategorÃ­a -->
  <div class="backdrop" id="modalCatConfig" style="display:none">
    <div class="modal">
      <h3 id="modalConfigTitle">ConfiguraciÃ³n de categorÃ­a</h3>
      <form id="formCatConfig">
        <div class="grid2">
          <div>
            <label>Nombre pestaÃ±a 2</label>
            <input name="tab2_name" type="text" placeholder="Notas" />
          </div>
          <div>
            <label>Nombre pestaÃ±a 3</label>
            <input name="tab3_name" type="text" placeholder="Archivos" />
          </div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelCatCfg">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Socio -->
  <div class="backdrop" id="modalSocio" style="display:none">
    <div class="modal">
      <h3 id="modalSocioTitle">Nuevo socio</h3>
      <form id="formSocio">
        <div class="grid2">
          <div>
            <label>Empresa *</label>
            <input name="empresa" type="text" placeholder="Nombre de la empresa" required />
          </div>
          <div>
            <label>Titular *</label>
            <input name="titular" type="text" placeholder="Nombre del titular" required />
          </div>
          <div>
            <label>TelÃ©fono</label>
            <input name="telefono" type="tel" placeholder="300 000 0000" />
          </div>
          <div>
            <label>DirecciÃ³n</label>
            <input name="direccion" type="text" placeholder="Calle 123 #45-67" />
          </div>
          <div>
            <label>Color de tarjeta</label>
            <input name="card_color" type="color" value="#121a26" />
            <div class="muted" style="margin-top:6px">Afecta el fondo de la tarjeta del socio.</div>
          </div>
          <div>
            <label>Logo / Imagen</label>
            <input name="avatar" type="file" accept=".png,.jpg,.jpeg" />
            <div class="muted" style="margin-top:6px">Opcional. MÃ¡x 2 MB.</div>
          </div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelSocio">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal TransacciÃ³n -->
  <div class="backdrop" id="modalTx" style="display:none">
    <div class="modal">
      <h3>Crear transacciÃ³n</h3>
      <form id="formTx">
        <div class="grid2">
          <div>
            <label>Origen Â· CategorÃ­a *</label>
            <select name="ori_cat" required></select>
          </div>
          <div>
            <label>Origen Â· Socio *</label>
            <select name="ori_socio" required></select>
          </div>
          <div>
            <label>Destino Â· CategorÃ­a *</label>
            <select name="des_cat" required></select>
          </div>
          <div>
            <label>Destino Â· Socio *</label>
            <select name="des_socio" required></select>
          </div>
          <div>
            <label>Valor *</label>
            <input name="valor" type="text" inputmode="numeric" placeholder="$ 0" required />
            <div class="muted" style="margin-top:6px">Se guarda como nÃºmero; solo es mÃ¡scara visual.</div>
          </div>
          <div>
            <label>Fecha *</label>
            <input name="fecha" type="date" required />
          </div>
          <div>
            <label>Comprobante (opcional)</label>
            <input name="voucher" type="file" accept=".png,.jpg,.jpeg,.pdf" />
            <div class="actions-inline" style="margin-top:6px">
              <button type="button" class="btn" id="btnViewVoucher" disabled>ğŸ‘ï¸ Ver</button>
              <button type="button" class="btn" id="btnClearVoucher" disabled>Quitar</button>
            </div>
          </div>
          <div>
            <label>Comentarios *</label>
            <input name="comentarios" type="text" placeholder="Concepto / comentario" required />
          </div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelTx">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- FAB (botÃ³n flotante) -->
  <button id="fabTx" class="fab" title="Nueva transacciÃ³n">ğŸ’²</button>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
