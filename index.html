<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ecologist-GPT ¬∑ Panel</title>
  <link rel="stylesheet" href="./assets/styles.css" />
  <script src="./config.js"></script>
  <script src="https://browser.sentry-cdn.com/8.20.0/bundle.tracing.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
</head>
<body>
  <div class="debug" id="debug">listo</div>

  <div class="layout">
    <aside>
      <div class="brand">
        <div class="logo">EG</div>
        <div>
          <h1>Ecologist-GPT</h1>
          <div class="muted">Panel principal</div>
        </div>
      </div>
      <nav id="nav">
        <button class="nav-btn" data-view="pedidos">üßæ Pedidos</button>
        <button class="nav-btn" data-view="seguimiento">üìç Seguimiento</button>
        <button class="nav-btn" data-view="clientes">üë• Clientes</button>
        <button class="nav-btn" data-view="inventario">üì¶ Inventario</button>
        <button class="nav-btn" data-view="devoluciones">‚Ü©Ô∏è Devoluciones</button>
        <button class="nav-btn" data-view="transacciones">üí≥ Transacciones</button>
        <button class="nav-btn" data-view="socios">ü§ù Socios</button>
      </nav>
      <div class="muted" style="margin-top:10px">v2.0 ¬∑ m√≥dulos</div>
    </aside>

    <main>
      <div class="topbar">
        <div class="title" id="title">‚Äî</div>
        <div id="topActions" class="actions-inline"></div>
      </div>
      <div id="view"></div>
    </main>
  </div>

  <!-- Modal Categor√≠a (crear/editar) -->
  <div class="backdrop" id="modalCat" style="display:none">
    <div class="modal">
      <h3 id="modalTitle">Nueva categor√≠a</h3>
      <form id="formCat">
        <div class="grid2">
          <div>
            <label>Nombre</label>
            <input name="nombre" type="text" placeholder="Ej: Proveedores" required />
          </div>
          <div>
            <label>Color</label>
            <input name="color" type="color" value="#3ba55d" />
          </div>
        </div>
        <div style="margin-top:12px">
          <label>Balance (placeholder)</label>
          <input name="balance" type="number" step="0.01" value="0" />
          <div class="muted" style="margin-top:6px">Luego ser√° calculado autom√°ticamente.</div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelCat">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Configuraci√≥n de Categor√≠a (tab2/tab3) -->
  <div class="backdrop" id="modalCatConfig" style="display:none">
    <div class="modal">
      <h3 id="modalConfigTitle">Configuraci√≥n de categor√≠a</h3>
      <form id="formCatConfig">
        <div class="grid2">
          <div>
            <label>Nombre pesta√±a 2</label>
            <input name="tab2_name" type="text" placeholder="Notas" />
          </div>
          <div>
            <label>Nombre pesta√±a 3</label>
            <input name="tab3_name" type="text" placeholder="Archivos" />
          </div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelCatCfg">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Socio (crear/editar) -->
  <div class="backdrop" id="modalSocio" style="display:none">
    <div class="modal">
      <h3 id="modalSocioTitle">Nuevo socio</h3>
      <form id="formSocio">
        <div class="grid2">
          <div>
            <label>Empresa *</label>
            <input name="empresa" type="text" placeholder="Nombre de la empresa" required />
          </div>
          <div>
            <label>Titular *</label>
            <input name="titular" type="text" placeholder="Nombre del titular" required />
          </div>
          <div>
            <label>Tel√©fono</label>
            <input name="telefono" type="tel" placeholder="300 000 0000" />
          </div>
          <div>
            <label>Direcci√≥n</label>
            <input name="direccion" type="text" placeholder="Calle 123 #45-67" />
          </div>
          <div>
            <label>Color de tarjeta</label>
            <input name="card_color" type="color" value="#121a26" />
            <div class="muted" style="margin-top:6px">Afecta el fondo de la tarjeta del socio.</div>
          </div>
          <div>
            <label>Logo / Imagen</label>
            <input name="avatar" type="file" accept=".png,.jpg,.jpeg" />
            <div class="muted" style="margin-top:6px">Opcional. M√°x 2 MB.</div>
          </div>
        </div>
        <div class="modal footer">
          <button type="button" class="btn" id="btnCancelSocio">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Confirmaci√≥n gen√©rico -->
  <div class="backdrop" id="modalConfirm" style="display:none">
    <div class="modal">
      <h3 id="confirmTitle">Confirmar acci√≥n</h3>
      <p id="confirmMsg" class="muted" style="margin:8px 0 16px">¬øSeguro que deseas continuar?</p>
      <div class="modal footer">
        <button type="button" class="btn" id="btnCancelConfirm">Cancelar</button>
        <button type="button" class="btn primary" id="btnOkConfirm">Aceptar</button>
      </div>
    </div>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
